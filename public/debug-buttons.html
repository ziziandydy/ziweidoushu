<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按鈕功能測試</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="p-8 bg-gray-100">
    <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow">
        [[mode:terminal]]

        <h1 class="text-2xl font-bold mb-6">按鈕功能測試</h1>

        <!-- 性別選擇測試 -->
        <div class="mb-6">
            <h3 class="font-bold mb-2">性別選擇測試</h3>
            <div class="flex space-x-2">
                <button id="gender-male"
                    class="flex-1 py-3 rounded-lg border transition-colors font-medium bg-blue-500 text-white border-blue-500"
                    onclick="selectGender('M')">
                    男
                </button>
                <button id="gender-female"
                    class="flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50"
                    onclick="selectGender('F')">
                    女
                </button>
            </div>
        </div>

        <!-- 曆法選擇測試 -->
        <div class="mb-6">
            <h3 class="font-bold mb-2">曆法選擇測試</h3>
            <div class="flex space-x-2">
                <button id="calendar-lunar"
                    class="flex-1 py-3 rounded-lg border transition-colors font-medium bg-green-500 text-white border-green-500"
                    onclick="selectCalendar('lunar')">
                    農曆
                </button>
                <button id="calendar-solar"
                    class="flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50"
                    onclick="selectCalendar('solar')">
                    西曆
                </button>
            </div>
        </div>

        <!-- 日期選擇測試 -->
        <div class="mb-6">
            <h3 class="font-bold mb-2">日期選擇測試</h3>
            <div class="grid grid-cols-3 gap-2">
                <select id="birth-year" class="p-2 border rounded">
                    <option value="">年份</option>
                    <option value="1990">1990</option>
                    <option value="1995">1995</option>
                </select>

                <select id="birth-month" class="p-2 border rounded">
                    <option value="">月份</option>
                    <option value="1">1月</option>
                    <option value="2">2月</option>
                    <option value="12">12月</option>
                </select>

                <select id="birth-day" class="p-2 border rounded">
                    <option value="">日期</option>
                </select>
            </div>
        </div>

        <!-- 測試結果 -->
        <div class="mb-6">
            <h3 class="font-bold mb-2">測試結果</h3>
            <div id="test-result" class="bg-gray-50 p-3 rounded text-sm">
                等待測試...
            </div>
        </div>

        <button onclick="runTests()" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">
            執行測試
        </button>

    </div>

    <script>
        let userProfile = { gender: 'M', calendarType: 'lunar' };

        // 選擇性別
        function selectGender(gender) {
            console.log('選擇性別:', gender);
            userProfile.gender = gender;
            const maleBtn = document.getElementById('gender-male');
            const femaleBtn = document.getElementById('gender-female');

            if (gender === 'M') {
                maleBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-blue-500 text-white border-blue-500';
                femaleBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50';
            } else {
                maleBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50';
                femaleBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-blue-500 text-white border-blue-500';
            }
            logResult();
        }

        // 選擇曆法
        function selectCalendar(type) {
            console.log('選擇曆法:', type);
            userProfile.calendarType = type;
            const lunarBtn = document.getElementById('calendar-lunar');
            const solarBtn = document.getElementById('calendar-solar');

            if (type === 'lunar') {
                lunarBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-green-500 text-white border-green-500';
                solarBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50';
            } else {
                solarBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-green-500 text-white border-green-500';
                lunarBtn.className = 'flex-1 py-3 rounded-lg border transition-colors font-medium bg-white text-gray-700 border-gray-300 hover:bg-gray-50';
            }
            logResult();
        }

        function logResult() {
            document.getElementById('test-result').innerHTML = `
                目前選擇: 性別=${userProfile.gender}, 曆法=${userProfile.calendarType}<br>
                時間: ${new Date().toLocaleTimeString()}
            `;
        }

        function runTests() {
            console.log('開始測試...');

            // 測試性別切換
            setTimeout(() => selectGender('F'), 500);
            setTimeout(() => selectGender('M'), 1000);

            // 測試曆法切換
            setTimeout(() => selectCalendar('solar'), 1500);
            setTimeout(() => selectCalendar('lunar'), 2000);

            setTimeout(() => {
                document.getElementById('test-result').innerHTML = `
                    ✅ 按鈕測試完成！<br>
                    最終狀態: 性別=${userProfile.gender}, 曆法=${userProfile.calendarType}<br>
                    所有按鈕功能正常運作
                `;
            }, 2500);
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function () {
            // 添加年份月份監聽器
            document.getElementById('birth-year').addEventListener('change', updateDays);
            document.getElementById('birth-month').addEventListener('change', updateDays);

            updateDays();
            logResult();
        });

        function updateDays() {
            const year = parseInt(document.getElementById('birth-year').value);
            const month = parseInt(document.getElementById('birth-month').value);
            const daySelect = document.getElementById('birth-day');

            daySelect.innerHTML = '<option value="">日期</option>';

            if (year && month) {
                const maxDays = new Date(year, month, 0).getDate();
                for (let i = 1; i <= maxDays; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + '日';
                    daySelect.appendChild(option);
                }
            }
        }
    </script>
</body>

</html>
