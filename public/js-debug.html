<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta name="robots" content="noindex, nofollow">
    <meta charset="UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript èª¿è©¦é é¢</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-yellow-50 p-8">
    <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-lg p-6">
        <h1 class="text-3xl font-bold text-red-600 mb-6">ğŸš¨ JavaScript èª¿è©¦é é¢</h1>

        <!-- èª¿è©¦æ§åˆ¶å° -->
        <div class="mb-6 p-4 bg-gray-100 rounded">
            <h3 class="font-bold mb-2">èª¿è©¦æ§åˆ¶å°</h3>
            <div class="space-y-2 text-sm">
                <div><strong>é é¢è¼‰å…¥ç‹€æ…‹:</strong> <span id="page-status">æª¢æŸ¥ä¸­...</span></div>
                <div><strong>userProfile ç‰©ä»¶:</strong> <span id="profile-status">æª¢æŸ¥ä¸­...</span></div>
                <div><strong>DOM å…ƒç´ :</strong> <span id="dom-status">æª¢æŸ¥ä¸­...</span></div>
                <div><strong>äº‹ä»¶ç›£è½å™¨:</strong> <span id="event-status">æª¢æŸ¥ä¸­...</span></div>
                <div><strong>åˆå§‹åŒ–å‡½æ•¸:</strong> <span id="init-status">æª¢æŸ¥ä¸­...</span></div>
            </div>
        </div>

        <!-- æ¸¬è©¦å€åŸŸ -->
        <div class="mb-6 p-4 bg-red-50 rounded">
            <h3 class="font-bold mb-4">åŠŸèƒ½æ¸¬è©¦å€åŸŸ</h3>

            <!-- æ€§åˆ¥é¸æ“‡æ¸¬è©¦ -->
            <div class="mb-4">
                <h4 class="font-bold mb-2">ğŸ”˜ æ€§åˆ¥é¸æ“‡æ¸¬è©¦</h4>
                <div class="flex space-x-2">
                    <button id="test-male" class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600"
                        onclick="testGender('M')">
                        ç”· (æ¸¬è©¦)
                    </button>
                    <button id="test-female"
                        class="px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50"
                        onclick="testGender('F')">
                        å¥³ (æ¸¬è©¦)
                    </button>
                </div>
                <div class="mt-2 text-xs">
                    é æœŸçµæœ: æŒ‰éˆ•é¡è‰²æ‡‰è©²æ”¹è®Š<br>
                    <span id="gender-test-result">ç­‰å¾…æ¸¬è©¦...</span>
                </div>
            </div>

            <!-- æ›†æ³•é¸æ“‡æ¸¬è©¦ -->
            <div class="mb-4">
                <h4 class="font-bold mb-2">ğŸ“… æ›†æ³•é¸æ“‡æ¸¬è©¦</h4>
                <div class="flex space-x-2">
                    <button id="test-lunar" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
                        onclick="testCalendar('lunar')">
                        è¾²æ›† (æ¸¬è©¦)
                    </button>
                    <button id="test-solar"
                        class="px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50"
                        onclick="testCalendar('solar')">
                        è¥¿æ›† (æ¸¬è©¦)
                    </button>
                </div>
                <div class="mt-2 text-xs">
                    é æœŸçµæœ: æŒ‰éˆ•é¡è‰²æ‡‰è©²æ”¹è®Š<br>
                    <span id="calendar-test-result">ç­‰å¾…æ¸¬è©¦...</span>
                </div>
            </div>

            <!-- å¹´ä»½ä¸‹æ‹‰æ¸¬è©¦ -->
            <div class="mb-4">
                <h4 class="font-bold mb-2">ğŸ“… å¹´ä»½ä¸‹æ‹‰æ¸¬è©¦</h4>
                <select id="test-year" class="w-full p-2 border rounded">
                    <option value="">é¸æ“‡å¹´ä»½</option>
                </select>
                <div class="mt-2 text-xs">
                    é æœŸçµæœ: æ‡‰è©²æœ‰å¹´ä»½é¸é … (1924-2025)<br>
                    <span id="year-test-result">ç­‰å¾…æ¸¬è©¦...</span>
                </div>
            </div>

            <!-- æœˆä»½ä¸‹æ‹‰æ¸¬è©¦ -->
            <div class="mb-4">
                <h4 class="font-bold mb-2">ğŸ“… æœˆä»½ä¸‹æ‹‰æ¸¬è©¦</h4>
                <select id="test-month" class="w-full p-2 border rounded">
                    <option value="">é¸æ“‡æœˆä»½</option>
                </select>
                <div class="mt-2 text-xs">
                    é æœŸçµæœ: æ‡‰è©²æœ‰æœˆä»½é¸é … (1-12æœˆ)<br>
                    <span id="month-test-result">ç­‰å¾…æ¸¬è©¦...</span>
                </div>
            </div>
        </div>

        <!-- æ‰‹å‹•æ¸¬è©¦å€åŸŸ -->
        <div class="p-4 bg-green-50 rounded">
            <h3 class="font-bold mb-4">ğŸ› ï¸ æ‰‹å‹•æ¸¬è©¦</h3>
            <div class="space-y-2">
                <button onclick="initYears()"
                    class="block w-full px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600">
                    1. åˆå§‹åŒ–å¹´ä»½é¸é …
                </button>
                <button onclick="initMonths()"
                    class="block w-full px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
                    2. åˆå§‹åŒ–æœˆä»½é¸é …
                </button>
                <button onclick="runAllTests()"
                    class="block w-full px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600">
                    3. åŸ·è¡Œæ‰€æœ‰è‡ªå‹•æ¸¬è©¦
                </button>
            </div>
        </div>

        <!-- çµæœè¼¸å‡º -->
        <div id="test-results" class="mt-6 p-4 bg-gray-100 rounded" style="display: none;">
            <h3 class="font-bold mb-2">ğŸ“Š æ¸¬è©¦çµæœ</h3>
            <div id="results-content" class="text-sm"></div>
        </div>
    </div>

    <script>
        let userProfile = {
            name: '',
            gender: 'M',
            birthYear: '',
            birthMonth: '',
            birthDay: '',
            birthHour: '',
            calendarType: 'lunar',
            isLeapMonth: false
        };

        let testResults = [];

        // åˆå§‹åŒ–è¨ºæ–·
        document.addEventListener('DOMContentLoaded', function () {
            console.log('ğŸš€ èª¿è©¦é é¢è¼‰å…¥é–‹å§‹...');

            checkPageStatus();
            checkUserProfile();
            checkDOMElements();
            checkEventListeners();
            checkInitFunctions();

            // è‡ªå‹•åˆå§‹åŒ–
            setTimeout(() => {
                initYears();
                initMonths();
                setTimeout(() => {
                    runAllTests();
                }, 100);
            }, 200);
        });

        function checkPageStatus() {
            document.getElementById('page-status').innerHTML =
                '<span class="text-green-600">âœ… é é¢è¼‰å…¥æ­£å¸¸</span>';
        }

        function checkUserProfile() {
            try {
                if (typeof userProfile !== 'undefined' && userProfile.gender) {
                    document.getElementById('profile-status').innerHTML =
                        '<span class="text-green-600">âœ… userProfile ç‰©ä»¶å­˜åœ¨</span>';
                } else {
                    document.getElementById('profile-status').innerHTML =
                        '<span class="text-red-600">âŒ userProfile ç‰©ä»¶æœ‰å•é¡Œ</span>';
                }
            } catch (error) {
                document.getElementById('profile-status').innerHTML =
                    '<span class="text-red-600">âŒ ' + error.message + '</span>';
            }
        }

        function checkDOMElements() {
            const elements = [
                'test-male', 'test-female',
                'test-lunar', 'test-solar',
                'test-year', 'test-month'
            ];

            let found = 0;
            elements.forEach(id => {
                if (document.getElementById(id)) found++;
            });

            document.getElementById('dom-status').innerHTML =
                `<span class="text-blue-600">${found}/${elements.length} å…ƒç´ æ‰¾åˆ°</span>`;
        }

        function checkEventListeners() {
            try {
                document.getElementById('event-status').innerHTML =
                    '<span class="text-green-600">âœ… onclick äº‹ä»¶é…ç½®æ­£å¸¸</span>';
            } catch (error) {
                document.getElementById('event-status').innerHTML =
                    '<span class="text-red-600">âŒ äº‹ä»¶ç›£è½å™¨æœ‰å•é¡Œ</span>';
            }
        }

        function checkInitFunctions() {
            if (typeof initYears === 'function' && typeof initMonths === 'function') {
                document.getElementById('init-status').innerHTML =
                    '<span class="text-green-600">âœ… åˆå§‹åŒ–å‡½æ•¸å­˜åœ¨</span>';
            } else {
                document.getElementById('init-status').innerHTML =
                    '<span class="text-red-600">âŒ åˆå§‹åŒ–å‡½æ•¸ç¼ºå¤±</span>';
            }
        }

        // æ¸¬è©¦å‡½æ•¸
        function testGender(gender) {
            console.log('æ¸¬è©¦æ€§åˆ¥é¸æ“‡:', gender);

            const maleBtn = document.getElementById('test-male');
            const femaleBtn = document.getElementById('test-female');

            userProfile.gender = gender;

            if (gender === 'M') {
                maleBtn.className = 'px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600';
                femaleBtn.className = 'px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50';
                updateTestResult('gender', 'PASS', 'ç”·æ€§æŒ‰éˆ•é¸ä¸­æˆåŠŸ');
            } else {
                femaleBtn.className = 'px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600';
                maleBtn.className = 'px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50';
                updateTestResult('gender', 'PASS', 'å¥³æ€§æŒ‰éˆ•é¸ä¸­æˆåŠŸ');
            }
        }

        function testCalendar(type) {
            console.log('æ¸¬è©¦æ›†æ³•é¸æ“‡:', type);

            const lunarBtn = document.getElementById('test-lunar');
            const solarBtn = document.getElementById('test-solar');

            userProfile.calendarType = type;

            if (type === 'lunar') {
                lunarBtn.className = 'px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600';
                solarBtn.className = 'px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50';
                updateTestResult('calendar', 'PASS', 'è¾²æ›†é¸ä¸­æˆåŠŸ');
            } else {
                solarBtn.className = 'px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600';
                lunarBtn.className = 'px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded hover:bg-gray-50';
                updateTestResult('calendar', 'PASS', 'è¥¿æ›†é¸ä¸­æˆåŠŸ');
            }
        }

        function updateTestResult(test, status, message) {
            const elementId = test + '-test-result';
            const element = document.getElementById(elementId);
            if (element) {
                const icon = status === 'PASS' ? 'âœ…' : 'âŒ';
                element.innerHTML = `${icon} ${message}`;
            }

            testResults.push({ test, status, message, time: new Date().toLocaleTimeString() });
        }

        // åˆå§‹åŒ–å‡½æ•¸
        function initYears() {
            console.log('åˆå§‹åŒ–å¹´ä»½...');
            try {
                const yearSelect = document.getElementById('test-year');
                const currentYear = new Date().getFullYear();

                // æ¸…ç©ºç¾æœ‰é¸é …
                yearSelect.innerHTML = '<option value="">é¸æ“‡å¹´ä»½</option>';

                for (let i = currentYear - 100; i <= currentYear; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + 'å¹´';
                    yearSelect.appendChild(option);
                }

                updateTestResult('year', 'PASS', `æˆåŠŸåˆå§‹åŒ– ${new Date().getFullYear() - 100} åˆ° ${currentYear} å¹´`);
            } catch (error) {
                updateTestResult('year', 'FAIL', error.message);
            }
        }

        function initMonths() {
            console.log('åˆå§‹åŒ–æœˆä»½...');
            try {
                const monthSelect = document.getElementById('test-month');

                // æ¸…ç©ºç¾æœ‰é¸é …
                monthSelect.innerHTML = '<option value="">é¸æ“‡æœˆä»½</option>';

                for (let i = 1; i <= 12; i++) {
                    const option = document.createElement('option');
                    option.value = i;
                    option.textContent = i + 'æœˆ';
                    monthSelect.appendChild(option);
                }

                updateTestResult('month', 'PASS', 'æˆåŠŸåˆå§‹åŒ– 1 åˆ° 12 æœˆ');
            } catch (error) {
                updateTestResult('month', 'FAIL', error.message);
            }
        }

        function runAllTests() {
            console.log('åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦...');

            testResults = [];

            // æ¸¬è©¦æª”æ¡ˆæ›´æ–°
            fetch('http://localhost:8080/')
                .then(response => response.text())
                .then(html => {
                    const hasFunctions = html.includes('function selectGender') && html.includes('function selectCalendar');
                    updateTestResult('page-js', hasFunctions ? 'PASS' : 'FAIL',
                        hasFunctions ? 'ä¸»é  JavaScript å‡½æ•¸å®Œæ•´' : 'ä¸»é  JavaScript å‡½æ•¸ç¼ºå¤±');
                })
                .catch(error => {
                    updateTestResult('page-load', 'FAIL', 'ç„¡æ³•è¼‰å…¥ä¸»é : ' + error.message);
                });

            // é¡¯ç¤ºçµæœ
            setTimeout(() => {
                showResults();
            }, 500);
        }

        function showResults() {
            const resultsDiv = document.getElementById('test-results');
            const contentDiv = document.getElementById('results-content');

            if (testResults.length > 0) {
                contentDiv.innerHTML = testResults.map(result => {
                    const icon = result.status === 'PASS' ? 'âœ…' : 'âŒ';
                    return `<div class="mb-1">${icon} ${result.test}: ${result.message}</div>`;
                }).join('');
                resultsDiv.style.display = 'block';
            }
        }
    </script>
</body>

</html>
