# 📚 TOC (目錄) 功能使用指南

## ✨ 功能說明

現在你的 Markdown 編輯器已經支援**自動生成目錄(Table of Contents, TOC)**功能!

## 🎯 如何使用

### 方法很簡單:

在你的 Markdown 文章中,只需要在想要顯示目錄的位置添加:

```markdown
[TOC]
```

系統會自動:
1. 掃描文章中的所有標題 (H1-H6)
2. 生成層級式目錄結構
3. 創建可點擊的錨點連結
4. 替換 `[TOC]` 標記為美化的目錄

## 📝 範例

### 輸入:

```markdown
# 我的文章標題

[TOC]

## 第一章
內容...

### 1.1 小節
內容...

## 第二章
內容...

### 2.1 小節
內容...
```

### 輸出:

會生成一個美化的目錄框,包含:
```
目錄
▸ 第一章
  ▹ 1.1 小節
▸ 第二章
  ▹ 2.1 小節
```

點擊任何連結都會平滑滾動到對應的章節。

## 🎨 TOC 樣式特色

✨ **視覺設計:**
- 漸變灰色背景
- 紫色左邊框 (#9333ea)
- 陰影效果
- 圓角設計

🎯 **互動效果:**
- Hover 時淡紫色高亮
- 平滑的滑動動畫
- 層級式縮排顯示

📱 **響應式:**
- 自動適應手機、平板、桌面
- 在所有裝置上都能正常顯示

## 🔧 技術細節

### 支援的標題層級
- `#` (H1)
- `##` (H2)
- `###` (H3)
- `####` (H4)
- `#####` (H5)
- `######` (H6)

### 錨點 ID 生成規則
```
原標題: "第一章：紫微斗數簡介"
生成ID: "第一章-紫微斗數簡介"
URL: #第一章-紫微斗數簡介
```

- 自動轉換為小寫
- 移除特殊符號
- 保留中文字符
- 用 `-` 連接單詞

### 多語言支援
✅ 完美支援中文標題
✅ 支援英文標題
✅ 支援混合標題
✅ 支援 Emoji 標題 😊

## 📦 已安裝位置

TOC 功能已經安裝在:

1. **管理後台編輯器** (`/admin-dashboard`)
   - 實時預覽
   - 編輯時即時更新

2. **前台博客文章頁** (`/blog/[slug]`)
   - 自動渲染
   - 讀者可見

## 🧪 測試文件

我已經為你準備了兩個測試文件:

### 1. MARKDOWN_TEST.md
包含基本的 Markdown 功能測試:
- 表格
- 列表
- 程式碼
- 引用

### 2. TOC_TEST.md (推薦)
完整的 TOC 功能展示:
- 多層級標題結構
- 包含表格
- 包含程式碼
- 實際的紫微斗數教學內容

## 📋 測試步驟

### 步驟 1: 登入後台
```
訪問: https://aiziwei.online/admin-dashboard
```

### 步驟 2: 新增文章
1. 點擊「新增文章」標籤
2. 複製 `TOC_TEST.md` 的內容
3. 貼到內容欄位

### 步驟 3: 查看預覽
右側預覽視窗會自動顯示:
- ✅ 美化的目錄框
- ✅ 所有標題的層級結構
- ✅ 可點擊的連結

### 步驟 4: 儲存並查看
1. 填寫標題: "紫微斗數完整指南"
2. 添加標籤: "教學,TOC測試,紫微斗數"
3. 狀態選擇: "發布"
4. 點擊「儲存文章」
5. 前往博客查看實際效果

## 🎯 最佳實踐

### ✅ 推薦做法:

1. **TOC 位置**
   ```markdown
   # 文章標題

   簡短介紹...

   [TOC]

   ## 正文開始
   ```

2. **標題層級**
   - 使用有序的層級 (H2 → H3 → H4)
   - 不要跳級 (H2 → H4 ❌)

3. **標題長度**
   - 保持標題簡潔明瞭
   - 20-30 字為佳

### ❌ 避免:

1. **多個 [TOC]**
   - 一篇文章只用一次

2. **標題太少**
   - 少於 3 個標題時不建議用 TOC

3. **標題重複**
   - 避免完全相同的標題文字

## 🐛 疑難排解

### Q: TOC 沒有顯示?
**A:** 檢查:
- 是否正確輸入 `[TOC]` (不區分大小寫)
- 文章中是否有標題 (`#`, `##`, `###` 等)
- 預覽視窗是否更新

### Q: 點擊連結沒反應?
**A:** 這是正常的:
- 在預覽視窗中錨點跳轉可能不工作
- 發布後在實際博客頁面會正常工作

### Q: 標題沒有被識別?
**A:** 確保:
- `#` 號和標題文字之間有空格
- 標題獨佔一行
- 沒有額外的格式符號

## 🎉 額外功能

### 已支援的 Markdown 功能:

✅ 表格 (Tables)
✅ 目錄 (TOC) - **新功能!**
✅ 標題 (H1-H6)
✅ 粗體/斜體 (Bold/Italic)
✅ 列表 (有序/無序)
✅ 程式碼區塊 (Code blocks)
✅ 引用 (Blockquotes)
✅ 連結 (Links)
✅ 分隔線 (Horizontal rules)
✅ 換行 (Line breaks)
✅ 智能引號 (Smart quotes)

## 📞 需要幫助?

如果遇到任何問題:
1. 檢查瀏覽器控制台 (F12)
2. 確認是否有錯誤訊息
3. 嘗試使用測試文件 (TOC_TEST.md)
4. 查看實際輸出的 HTML

---

**享受你的新功能吧! 🎊**
